# v0.1 documentation implementation plan

## Overview

Version 0.1 delivers a documentation system that serves plain markdown files
from the `/docs/` directory using the `marked` library for markdown rendering.
The system reads markdown files on server startup, stores them in memory, and
renders them on-demand for optimal simplicity and performance.

## Goals

| Goal                  | Description                          | Success criteria                                         |
| --------------------- | ------------------------------------ | -------------------------------------------------------- |
| Markdown rendering    | Serve .md files from `/docs/` folder | Markdown files render at boltfoundry.com/docs/[filename] |
| Simple implementation | Use `marked` library for rendering   | Clean, maintainable code with minimal dependencies       |
| Server-side rendering | Render markdown on-demand            | Fast page loads with pre-rendered HTML                   |
| Direct routing        | Bypass Isograph for speed            | Docs load quickly without GraphQL overhead               |

## Anti-goals

| Anti-goal              | Reason                                      |
| ---------------------- | ------------------------------------------- |
| MDX/JSX components     | Keep it simple with plain markdown          |
| Isograph integration   | Optimize for speed, add GraphQL layer later |
| Build-time processing  | Runtime rendering is simpler and sufficient |
| Cross-monorepo docs    | Start with `/docs/` only, expand later      |
| File extension routing | Future work (.md, .pdf extensions in URLs)  |

## Technical approach

Use the lightweight `marked` library to render markdown files on-demand. On
server startup, read all `.md` files from the `/docs/` directory into memory.
When a documentation page is requested, render the markdown to HTML server-side
and send the pre-rendered content to the client. This approach is simpler than
build-time processing and provides excellent performance.

## Components

| Status | Component          | Purpose                                  |
| ------ | ------------------ | ---------------------------------------- |
| ðŸ”„     | `PageDocs.tsx`     | Direct route component for docs pages    |
| âœ…     | `/docs/` directory | Contains 15 markdown documentation files |
| ðŸ”„     | Markdown loader    | Read `.md` files on server startup       |
| âœ…     | Route registration | `/docs/*` routes already working         |
| ðŸ”„     | Markdown renderer  | Server-side render with `marked`         |

## Technical decisions

| Decision                    | Reasoning                        | Alternatives considered       |
| --------------------------- | -------------------------------- | ----------------------------- |
| Use `marked` library        | Simple, lightweight, reliable    | MDX with complexity           |
| Direct routing (no GraphQL) | Speed of implementation          | Isograph integration now      |
| Server-side rendering       | Simple implementation, good perf | Client-side rendering         |
| `/docs/` directory only     | Start simple, expand later       | All monorepo docs immediately |
| Read files on startup       | Fast runtime performance         | Read files on each request    |
| In-memory storage           | Eliminate file I/O on requests   | Database storage              |
| Plain markdown only         | Focus on content, not components | Support MDX components        |

## Next steps

| Question                | How to explore                            |
| ----------------------- | ----------------------------------------- |
| MDX component styling   | Test with existing blog styles first      |
| Navigation between docs | Start with manual links, auto-gen later   |
| Search functionality    | Not needed for v0.1, revisit if requested |

## Existing content (15 files)

```
docs/
â”œâ”€â”€ README.md               # Documentation overview
â”œâ”€â”€ BACKLOG.md              # Development backlog
â”œâ”€â”€ CHANGELOG.md            # Version history
â”œâ”€â”€ STATUS.md               # Current project status
â”œâ”€â”€ business-vision.md      # Business strategy
â”œâ”€â”€ company-vision.md       # Company direction
â”œâ”€â”€ deck-system.md          # Deck/card system docs
â”œâ”€â”€ early-content-plan.md   # Content strategy
â”œâ”€â”€ improving-inference-philosophy.md  # AI philosophy
â”œâ”€â”€ library-vision.md       # Library architecture
â”œâ”€â”€ marketing-plan.md       # Marketing strategy
â”œâ”€â”€ measurement-strategy.md # Metrics and KPIs
â”œâ”€â”€ product-plan.md         # Product roadmap
â”œâ”€â”€ team-story.md           # Team background
â””â”€â”€ wut.md                  # (Unknown content)
```

## Implementation notes

### Server-side markdown rendering

The docs system uses runtime markdown rendering for simplicity:

1. Markdown files in `/docs/` are read on server startup
2. Files are stored in memory as a Map<slug, content>
3. When a doc is requested, `marked` renders the markdown to HTML
4. The HTML is server-rendered in the PageDocs component
5. Client receives pre-rendered HTML (can be hydrated if needed)

This approach eliminates build complexity while maintaining excellent
performance through in-memory caching.

## Implementation checklist

### 0.1.0: Markdown support (today's focus)

- [ ] Create markdown loader service to:
  - Read `.md` files from `/docs/` directory on startup
  - Store content in memory Map
  - Provide getMarkdown(slug) method
- [ ] Update `apps/boltFoundry/pages/PageDocs.tsx` to:
  - Get markdown content from loader service
  - Render markdown server-side using `marked`
  - Return pre-rendered HTML
- [ ] Add error handling for missing documents
- [ ] Verify all 15 markdown files in `/docs/` render correctly

### 0.1.x: Future enhancements

- [ ] Add `/docs` index page listing all available documentation
- [ ] Improve URL slug handling for better navigation
- [ ] Add basic navigation between docs
- [ ] Ensure code blocks have syntax highlighting
- [ ] Apply consistent typography and spacing
- [ ] Add copy-to-clipboard for code blocks
- [ ] Style to match Bolt Foundry design system
- [ ] Document the path to cross-monorepo documentation
- [ ] Plan for file extension routing (.md, .pdf)
- [ ] Design migration path to Isograph integration
- [ ] E2E tests for all documentation routes
- [ ] Build pipeline tests for markdown processing
- [ ] Manual verification of all docs content
- [ ] Create GraphQL types for documentation
- [ ] Migrate from direct routing to Isograph entrypoints
- [ ] Add document querying capabilities
- [ ] Enable dynamic documentation features

## Success metrics for v0.1.0

- All 15 markdown files from `/docs/` are accessible at `/docs/[filename]`
- Markdown content renders with proper formatting
- Build process successfully compiles `.md` files
- No errors when navigating to documentation pages

## Current status

### What's working

- Direct routing pattern (bypassing Isograph)
- Route registration for `/docs/*` paths
- 15 markdown files ready in `/docs/` directory
- Basic PageDocs component structure

### Implementation strategy

1. **Use `marked` for markdown rendering**
   - Simple, lightweight library
   - No build-time processing needed
   - Renders markdown to HTML server-side

2. **In-memory content storage**
   - Read files once on startup
   - Store in Map for O(1) lookup
   - No file I/O on requests

3. **Server-side rendering**
   - Send pre-rendered HTML to client
   - Optional client-side hydration
   - Excellent performance
